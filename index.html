<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>The Sleeping Dragon üêâ - Men√∫ Interactivo PDF</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.547/pdf.min.js"></script>
  <style>
    body {
      background: #222;
      color: white;
      font-family: Arial, sans-serif;
      margin: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: #333;
    }

    header h1 {
      margin: 0;
      font-size: 28px;
      color: #FFD700; /* dorado */
    }

    select, button {
      font-size: 16px;
      padding: 8px 12px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
    }

    main {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    #thumbnails {
      width: 150px;
      background: #333;
      overflow-y: auto;
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    #thumbnails canvas {
      width: 100%;
      cursor: pointer;
      border: 2px solid transparent;
      border-radius: 4px;
    }

    #thumbnails canvas.selected {
      border-color: #4CAF50;
    }

    #pdf-viewer {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: auto;
      background: #fff;
      padding: 20px;
    }

    #pdf-canvas {
      border-radius: 8px;
    }

    .nav-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 10px;
      background: #333;
    }

    button {
      background: #4CAF50;
      color: white;
    }
  </style>
</head>
<body>
  <header>
    <h1>The Sleeping Dragon üêâ</h1>
    <select id="pdf-selector">
      <option value="page-01.pdf">Men√∫ Secci√≥n 1</option>
      <option value="page-02.pdf">Men√∫ Secci√≥n 2</option>
      <option value="page-03.pdf">Men√∫ Secci√≥n 3</option>
      <option value="page-04.pdf">Men√∫ Secci√≥n 4</option>
    </select>
  </header>

  <main>
    <div id="thumbnails"></div>
    <div id="pdf-viewer">
      <canvas id="pdf-canvas"></canvas>
    </div>
  </main>

  <div class="nav-buttons">
    <button id="prev">‚¨Ö Anterior</button>
    <button id="next">Siguiente ‚û°</button>
  </div>

  <script>
    const pdfFiles = ["page-01.pdf","page-02.pdf","page-03.pdf","page-04.pdf"];
    let currentPDF = 0;
    let pdfDoc = null;
    let currentPage = 1;
    const canvas = document.getElementById("pdf-canvas");
    const ctx = canvas.getContext("2d");

    async function loadPDF(file) {
      pdfDoc = await pdfjsLib.getDocument(file).promise;
      currentPage = 1;
      renderPage(currentPage);
      renderThumbnails();
    }

    async function renderPage(num) {
      const page = await pdfDoc.getPage(num);
      const viewport = page.getViewport({scale: 1.5});
      canvas.width = viewport.width;
      canvas.height = viewport.height;
      await page.render({canvasContext: ctx, viewport: viewport}).promise;
      highlightThumbnail(num);
    }

    async function renderThumbnails() {
      const thumbsContainer = document.getElementById("thumbnails");
      thumbsContainer.innerHTML = "";
      for (let i = 1; i <= pdfDoc.numPages; i++) {
        const thumbCanvas = document.createElement("canvas");
        const thumbCtx = thumbCanvas.getContext("2d");
        const page = await pdfDoc.getPage(i);
        const viewport = page.getViewport({scale: 0.2});
        thumbCanvas.width = viewport.width;
        thumbCanvas.height = viewport.height;
        await page.render({canvasContext: thumbCtx, viewport: viewport}).promise;
        thumbCanvas.addEventListener("click", () => {
          currentPage = i;
          renderPage(currentPage);
        });
        thumbsContainer.appendChild(thumbCanvas);
      }
    }

    function highlightThumbnail(num) {
      const thumbs = document.querySelectorAll("#thumbnails canvas");
      thumbs.forEach((c, i) => c.classList.toggle("selected", i + 1 === num));
    }

    document.getElementById("prev").addEventListener("click", () => {
      if (currentPage > 1) {
        currentPage--;
        renderPage(currentPage);
      }
    });

    document.getElementById("next").addEventListener("click", () => {
      if (currentPage < pdfDoc.numPages) {
        currentPage++;
        renderPage(currentPage);
      }
    });

    document.getElementById("pdf-selector").addEventListener("change", (e) => {
      const file = e.target.value;
      currentPDF = pdfFiles.indexOf(file);
      loadPDF(file);
    });

    loadPDF(pdfFiles[currentPDF]);
  </script>
</body>
</html>
